{% extends 'shop/basic.html' %}

{% block title%} {{prodView.productName}}{% endblock %}
{% block css %} 
 <style>
   
</style>
{% endblock %}


{% block body %} 
<div class="container">

    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="/shop/">Home</a></li>
          <li class="breadcrumb-item"><a href="/shop/">Shop</a></li>
          <li class="breadcrumb-item active" aria-current="page">Product Page</li>
        </ol>
      </nav>

    <!-- Portfolio Item Heading -->
    <h3 style="font-family: 'Muli', sans-serif;" class="my-4" id="namepr{{i}}">{{prodView.productName}}
      
    </h1>
  
    <!-- Portfolio Item Row -->
    <div class="row">
  
      <div class="col-md-5">
        <div class="imgdiv">
        <img id="imagepr{{i}}" class="img-fluid" src="/media/{{prodView.image}}" alt="">
      </div>
      
       <form style="align-content: center;" class="d-flex .flex-row mt-5 ">
          <!-- Default input -->
          <div style="align:center;font-family: 'PT Sans', sans-serif;font-size: 22px;">
          <button type="button"  class="btn btn-danger align_middle  btn-lg ">Buy Now</button>
          <span id="divpr{{i}}" class="divpr">
          <a href="/shop/cart"><button type="button" id="pr{{i}}" class="btn btn-primary btn-lg cart">Add to Cart</button></a>
          </span>
        </div>
      </form>
      
      </div>
  
      <div class="col-md-7">
        <div class="col-md-12 mb-4">

          <!--Content-->
          <div class="p-4">

            <div style="font-family: 'Josefin Sans', sans-serif; font-size: 16px;" class="mb-3">
              <a href="">
                <span id="catagorypr{{i}}" class="badge badge-warning">{{prodView.category}}</span>
              </a>
              <a href="">
                <span class="badge badge-primary">New</span>
              </a>
              <a href="">
                <span class="badge badge-danger">Bestseller</span>
              </a>
            </div>

            <p class="lead font-weight-normal" >
              
              <span style="font-family: 'PT Sans', sans-serif; font-size: 28px; ">Rs. <span id="pricepr{{i}}">{{prodView.price}}</span></span>
            </p>

            <p style="font-family: 'Montserrat', sans-serif;font-size: 22px;" class="lead font-weight-bold">Description</p>

            <p style="font-family: 'Source Sans Pro', sans-serif;" class="font-weight-light">{{prodView.desc}}</p>



            <h3 style="font-family: 'Montserrat', sans-serif;font-size: 22px;" class="my-4 mt-5 lead font-weight-bold" >Product Details</h3>
            <ul style="font-family: 'Source Sans Pro', sans-serif;">
              <li>Lorem Ipsum</li>
              <li>Dolor Sit Amet</li>
              <li>Consectetur</li>
              <li>Adipiscing Elit</li>
            </ul>
          </div>
          <!--Content-->

        </div></div>
  
    </div>
    <!-- /.row -->
  
    <!-- Related Projects Row -->
    <h3 style="font-family: 'Montserrat', sans-serif;font-size: 22px;" class="my-4 font-weight-bold">Related Products</h3>
  
    <div class="row">
  
      <div class="col-md-3 col-sm-6 mb-4">
        <a href="#">
              <img class="img-fluid" src="http://placehold.it/500x300" alt="">
            </a>
      </div>
  
      <div class="col-md-3 col-sm-6 mb-4">
        <a href="#">
              <img class="img-fluid" src="http://placehold.it/500x300" alt="">
            </a>
      </div>
  
      <div class="col-md-3 col-sm-6 mb-4">
        <a href="#">
              <img class="img-fluid" src="http://placehold.it/500x300" alt="">
            </a>
      </div>
  
      <div class="col-md-3 col-sm-6 mb-4">
        <a href="#">
              <img class="img-fluid" src="http://placehold.it/500x300" alt="">
            </a>
      </div>
  
    </div>
    <!-- /.row -->
  
  </div>
  <!-- /.container -->

{% endblock %}
{% block js %}

<script>
  console.log('working')
  if(localStorage.getItem('cart')==null){
    var cart = {};
  }
  else
  {
    cart =JSON.parse(localStorage.getItem('cart'))
    updateCart(cart);
  }  
  
  $('.cart').click(function(){
    var idstr = this.id.toString();
    console.log(idstr)
    if (cart[idstr] != undefined) {
        qty = cart[idstr][0] + 1;
       
        
    } else {
        qty = 1;
        name = document.getElementById('name'+idstr).innerHTML;
        price = document.getElementById('price'+idstr).innerHTML;
        image = $('.imgdiv img').attr('src');
        catagory = document.getElementById('catagory'+idstr).innerHTML;
        cart[idstr] = [qty, name, parseInt(price), image, catagory ];
    }
    updateCart(cart);
     });



    function updateCart(cart) {

    localStorage.setItem('cart', JSON.stringify(cart));
  
    console.log(cart);
  
}
  </script>
{% endblock %}